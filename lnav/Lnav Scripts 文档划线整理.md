---
date: 2025-08-18
---
## **1. lnav è„šæœ¬æ¦‚è¿°**

**ä¸Šä¸‹æ–‡**
`lnav` æ”¯æŒå°†å‘½ä»¤å’Œ SQL æŸ¥è¯¢ç»„åˆæˆè„šæœ¬ï¼ˆ`.lnav` åç¼€ï¼‰ï¼Œä»¥è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ï¼Œä¾‹å¦‚åˆ†ææ—¥å¿—ä¿¡æ¯ã€ç”ŸæˆæŠ¥å‘Šç­‰ã€‚å†…ç½®è„šæœ¬å¦‚ `partition-by-boot` å¯ç”¨äºæ ¹æ®å†…æ ¸æ—¥å¿—åˆ’åˆ†æ—¥å¿—è§†å›¾ã€‚

### **1.1 è„šæœ¬ç»„æˆ**

#### **æ”¯æŒçš„è„šæœ¬è¯­è¨€æ··åˆ**
- **SQLï¼ˆåŠè§’åˆ†å· `;` å¼€å¤´ï¼‰**
- **lnav å‘½ä»¤ï¼ˆå†’å· `:` å¼€å¤´ï¼‰**
- **å…¶ä»–è„šæœ¬å¼•ç”¨ï¼ˆç«–çº¿ `|` å¼€å¤´ï¼‰**
- **æ³¨é‡Šï¼ˆäº•å· `#` å¼€å¤´ï¼‰**

```bash
# ç¤ºä¾‹è„šæœ¬ç‰‡æ®µ
# :eval å‘½ä»¤ç”¨äºå˜é‡æ›¿æ¢
:eval :filter-out ${pattern}
```

### **1.2 è„šæœ¬æ‰§è¡Œæ–¹å¼**
- å¯ä½¿ç”¨å®Œæ•´è·¯å¾„è°ƒç”¨è„šæœ¬ï¼Œä¾‹å¦‚ï¼š
  ```bash
  | /path/to/script.lnav
  ```
- æˆ–å°†è„šæœ¬**å®‰è£…åœ¨æ ¼å¼ç›®å½•**ä¸‹ï¼Œé€šè¿‡åŸºç¡€åè°ƒç”¨ï¼ˆæ— éœ€è·¯å¾„ï¼‰ã€‚
  - å®‰è£…æ–¹æ³•è§ï¼š[Installing Format Files](formats.html#installing-format-files)

---

## **2. è„šæœ¬ä¸­å¯ç”¨çš„å˜é‡**

| å˜é‡å             | æè¿°                |
| --------------- | ----------------- |
| `0`             | æ­£åœ¨æ‰§è¡Œçš„è„šæœ¬è·¯å¾„         |
| `1-N`           | ä¼ å…¥çš„å‚æ•°å€¼            |
| `#`             | ä¼ å…¥å‚æ•°ä¸ªæ•°            |
| `__all__`       | æ‰€æœ‰å‚æ•°ç»„åˆæˆçš„å­—ç¬¦ä¸²ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ |
| `LNAV_HOME_DIR` | ç”¨æˆ·é…ç½®ç›®å½•è·¯å¾„          |
| `LNAV_WORK_DIR` | lnav ç¼“å­˜å·¥ä½œç›®å½•è·¯å¾„     |

> âš  è­¦å‘Šï¼šåœ¨å¤§å¤šæ•° `lnav` å‘½ä»¤ä¸­å¼•ç”¨å˜é‡ï¼Œå¿…é¡»ä½¿ç”¨ `:eval`ã€‚

---

## **3. è„šæœ¬å¸®åŠ©ä¿¡æ¯æ ¼å¼**

**ä½œç”¨**
ä¸ºè„šæœ¬æ·»åŠ äº¤äº’å¼å¸®åŠ©æç¤ºã€‚

**æ”¯æŒæ ‡ç­¾ï¼š**

| æ ‡ç­¾             | ç¤ºä¾‹ |
|------------------|------|
| `@synopsis`      | # @synopsis: hello-world `<name1>` [ `<name2>` ... ]
| `@description`   | # @description: Say hello to the given names. |
| `@output-format` | # @output-format: text/markdown |

**ç¤ºä¾‹æ³¨é‡Šå¤´ï¼š**
```bash
# @synopsis: hello-world <name1> [<name2> ...]
# @description: Say hello to the given names.
# @output-format: text/markdown
```

---

## **4. å®ç”¨æŠ€å·§ï¼šå˜é‡æ›¿æ¢**

### **ä½¿ç”¨ `:eval` è¿›è¡Œå˜é‡æ›¿æ¢**

**èƒŒæ™¯**
æŸäº› `lnav` å‘½ä»¤ï¼ˆå¦‚ `:filter-out`ï¼‰ä¸æ”¯æŒå˜é‡ç›´æ¥æ’å…¥ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ `:eval`ã€‚

### âœ… ç¤ºä¾‹ï¼š
```bash
:eval :filter-out ${pattern}
```
- `:eval` ä¼šå…ˆå°† `${pattern}` æ›¿æ¢ä¸ºå˜é‡å€¼ï¼Œå†æ‰§è¡Œ `:filter-out` å‘½ä»¤ã€‚

---

## **5. VSCode æ’ä»¶æ”¯æŒ**

**æ’ä»¶åç§°**
ğŸ‘‰ [lnav VSCode Extension](https://marketplace.visualstudio.com/items?itemName=lnav.lnav)

**åŠŸèƒ½**
- ä¸º `.lnav` è„šæœ¬æ–‡ä»¶æä¾›è¯­æ³•é«˜äº®ï¼Œæå‡ç¼–å†™å’Œè°ƒè¯•æ•ˆç‡ã€‚

---

## **6. å†…ç½®è„šæœ¬å‚è€ƒï¼ˆBuiltin Scriptsï¼‰**

### **6.1 `find-msg`**
- ç”¨é€”ï¼šæŸ¥æ‰¾ä¸å½“å‰èšç„¦æ—¥å¿—æ¶ˆæ¯ç›¸å…³è”çš„æ¶ˆæ¯ã€‚
- é»˜è®¤æ”¯æŒå­—æ®µæŸ¥æ‰¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å­—æ®µã€‚
- [æºç åœ°å€](https://github.com/tstack/lnav/blob/master/src/scripts/find-msg.lnav)

### **6.2 `find-chained-msg`**
- ä¸ `find-msg` ç±»ä¼¼ï¼Œä½†æ”¯æŒå°†åŒ¹é…çš„å­—æ®µæ‹†åˆ†åˆ°ç›¸é‚»æ—¥å¿—è¡Œçš„ä¸åŒå­—æ®µä¸­ã€‚
- é€‚ç”¨äºé“¾å¼æ—¥å¿—é€»è¾‘ã€‚
- [æºç åœ°å€](https://github.com/tstack/lnav/blob/master/src/scripts/find-chained-msg.lnav)

### **6.3 `report-access-log`**
- ç”¨é€”ï¼šåŸºäº `access_log` è¡¨ç”Ÿæˆç±»ä¼¼ `goaccess` çš„è®¿é—®æŠ¥å‘Šã€‚
- è¾“å‡ºå¯è¯»æ€§é«˜ï¼Œé€‚åˆåˆ†æè®¿é—®æ¨¡å¼ã€‚
- [æºç åœ°å€](https://github.com/tstack/lnav/blob/master/src/scripts/report-access-log.lnav)

---

## **7. æ€»ç»“**

| å†…å®¹ | è¯´æ˜ |
|------|------|
| **è„šæœ¬åç¼€** | `.lnav` |
| **å¤šè¯­è¨€æ··åˆæ”¯æŒ** | SQLã€lnav å‘½ä»¤ã€è„šæœ¬è°ƒç”¨ |
| **å˜é‡** | ä½¿ç”¨ `:eval` æ›¿æ¢ |
| **å¸®åŠ©ç»“æ„** | ä½¿ç”¨æ³¨é‡Šæ ‡ç­¾æä¾›äº¤äº’å¸®åŠ© |
| **æ‰§è¡Œæ–¹å¼** | æ–‡ä»¶è·¯å¾„æˆ–å®‰è£…ç›®å½•è°ƒç”¨ |
| **æ ¼å¼æ–‡ä»¶** | å¯å‚è€ƒå®‰è£…è¯´æ˜å°†å…¶æ”¾ç½®åœ¨æ ¼å¼ç›®å½•ä¸­ |
| **å¼€å‘æ”¯æŒ** | VSCode æ’ä»¶æä¾›è¯­æ³•é«˜äº®æ”¯æŒ |

---

å¦‚éœ€æ·±å…¥ä½¿ç”¨ `lnav` è„šæœ¬åŠŸèƒ½ï¼Œå»ºè®®ç»“åˆä¸Šè¿°å†…ç½®è„šæœ¬ä»£ç ï¼Œè¿›è¡Œå®è·µè°ƒè¯•å’ŒäºŒæ¬¡å¼€å‘ã€‚

